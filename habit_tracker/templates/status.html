<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">&larr; –ù–∞–∑–∞–¥ –∫ –ø—Ä–∏–≤—ã—á–∫–∞–º</a>
        <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫</h1>

        {% if stats %}
            <div class="stats-grid">
                {% for habit_stats in stats %}
                    <div class="habit-stats-card">
                        <h2>{{ habit_stats.name }}</h2>
                        <p><strong>–í—Å–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π:</strong> {{ habit_stats.total_marks }}</p>
                        <p><strong>–¢–µ–∫—É—â–∏–π streak:</strong> {{ habit_stats.current_streak }} –¥–Ω.</p>
                        <p><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π streak:</strong> {{ habit_stats.max_streak }} –¥–Ω.</p>
                        <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –¥–Ω–µ–π:</strong> {{ "%.1f"|format(habit_stats.success_rate) }}%</p>
                        <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–º–µ—Ç–∫–∏:</strong></p>
                        <ul class="last-marks-list">
                            {% for date in habit_stats.last_dates %}
                                <li>{{ date.strftime('%Y-%m-%d') }}</li>
                            {% else %}
                                <li>–ù–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Ç–º–µ—Ç–æ–∫</li>
                            {% endfor %}
                        </ul>
                        <p><a href="/habit/{{ habit_stats.id }}/" class="detail-link">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∏–≤—ã—á–∫–µ</a></p>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–≤—ã—á–∫–∏ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.</p>
        {% endif %}
    </div>
    <script src="{{ url_for('static', path='js/script.js') }}"></script>
</body>
</html>